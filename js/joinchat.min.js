!function(t,e,o){"use strict";function n(){a&&a.apply(this,arguments),a=null}var a;e.joinchat_obj=t.extend({$div:null,settings:null,store:null,chatbox:!1,showed_at:0,is_mobile:!!navigator.userAgent.match(/Android|iPhone|BlackBerry|IEMobile|Opera Mini/i)},e.joinchat_obj||{}),joinchat_obj.$=function(e){return t(e||this.$div,this.$div)},joinchat_obj.send_event=function(n){var a,i,s,h;(n=t.extend({event_category:"JoinChat",event_label:"",event_action:"",chat_channel:"whatsapp",chat_id:"--",is_mobile:this.is_mobile?"yes":"no",page_location:location.href,page_title:document.title||"no title"},n)).event_label=n.event_label||n.link||"",n.event_action=n.event_action||n.chat_channel+": "+n.chat_id,delete n.link,!1!==t(o).triggerHandler("joinchat:event",[n])&&(h=e[this.settings.ga_tracker]||e.ga||e.__gaTracker,a=e[this.settings.data_layer]||e[e.gtm4wp_datalayer_name]||e.dataLayer,"function"==typeof h&&"function"==typeof h.getAll&&(h("set","transport","beacon"),h.getAll().forEach((function(t){t.send("event",n.event_category,n.event_action,n.event_label)}))),t.each(n,(function(t,e){n[t]="string"==typeof e?e.substring(0,100):e})),"function"==typeof gtag&&"object"==typeof a&&(i=this.settings.ga_event||"generate_lead",delete(s=t.extend({transport_type:"beacon"},n)).page_location,delete s.page_title,a.forEach((function(t){"config"==t[0]&&t[1]&&"G-"==t[1].substring(0,2)&&(s.send_to=t[1],gtag("event",i,s))})),this.settings.gads&&gtag("event","conversion",{send_to:this.settings.gads})),h=n.event_category,delete n.event_category,"object"==typeof a&&a.push(t.extend({event:h},n)),"function"==typeof fbq&&fbq("trackCustom",h,n))},joinchat_obj.whatsapp_link=function(t,e,o){return e=void 0!==e?e:this.settings.message_send||"",((o=void 0!==o?o:this.settings.whatsapp_web&&!this.is_mobile)?"https://web.whatsapp.com/send?phone=":"https://wa.me/")+encodeURIComponent(t||this.settings.telephone)+(e?(o?"&text=":"?text=")+encodeURIComponent(e):"")},joinchat_obj.chatbox_show=function(){this.chatbox||(this.chatbox=!0,this.showed_at=Date.now(),this.$div.addClass("joinchat--chatbox"),this.settings.message_badge&&this.$(".joinchat__badge").hasClass("joinchat__badge--in")&&this.$(".joinchat__badge").toggleClass("joinchat__badge--in joinchat__badge--out"),t(o).trigger("joinchat:show"))},joinchat_obj.chatbox_hide=function(){this.chatbox&&(this.chatbox=!1,this.$div.removeClass("joinchat--chatbox joinchat--tooltip"),this.settings.message_badge&&this.$(".joinchat__badge").removeClass("joinchat__badge--out"),t(o).trigger("joinchat:hide"))},joinchat_obj.save_hash=function(){var t=this.settings.message_hash||"none",e=(this.store.getItem("joinchat_hashes")||"").split(",").filter(Boolean);-1===e.indexOf(t)&&(e.push(t),this.store.setItem("joinchat_hashes",e.join(",")))},joinchat_obj.open_whatsapp=function(n,a){n=n||this.settings.telephone,a=void 0!==a?a:this.settings.message_send||"",n={link:this.whatsapp_link(n,a),chat_channel:"whatsapp",chat_id:n,chat_message:a},a=new RegExp("^https?://(wa.me|(api|web|chat).whatsapp.com|"+location.hostname.replace(".",".")+")/.*","i"),!1!==t(o).triggerHandler("joinchat:open",[n])&&(a.test(n.link)?(this.send_event(n),e.open(n.link,"joinchat","noopener")):console.error("Joinchat: the link doesn't seem safe, it must point to the current domain or whatsapp.com"))},a=function(){if(joinchat_obj.$div=t(".joinchat"),joinchat_obj.$div.length){joinchat_obj.settings=joinchat_obj.$div.data("settings");try{localStorage.setItem("test",1),localStorage.removeItem("test"),joinchat_obj.store=localStorage}catch(t){joinchat_obj.store={_data:{},setItem:function(t,e){this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:null}}}if("object"!=typeof joinchat_obj.settings)try{joinchat_obj.settings=JSON.parse(joinchat_obj.$div.attr("data-settings"))}catch(t){joinchat_obj.settings=void 0,console.error("Joinchat: can't get settings")}joinchat_obj.settings&&joinchat_obj.settings.telephone&&(joinchat_obj.is_mobile||!joinchat_obj.settings.mobile_only?function(){t(o).trigger("joinchat:starting");var n,a,i=1e3*joinchat_obj.settings.button_delay,s=1e3*joinchat_obj.settings.message_delay,h=!!joinchat_obj.settings.message_hash,c=!!joinchat_obj.$(".joinchat__box").length,_=parseInt(joinchat_obj.store.getItem("joinchat_views")||1)>=joinchat_obj.settings.message_views,j=-1!==(joinchat_obj.store.getItem("joinchat_hashes")||"").split(",").filter(Boolean).indexOf(joinchat_obj.settings.message_hash||"none");function r(){clearTimeout(a),joinchat_obj.chatbox_show()}function l(){joinchat_obj.save_hash(),joinchat_obj.chatbox_hide()}var b,g,d,p="joinchat--show";function u(){var t=(o.activeElement.type||"").toLowerCase();0<=["date","datetime","email","month","number","password","search","tel","text","textarea","time","url","week"].indexOf(t)?joinchat_obj.chatbox?(joinchat_obj.chatbox_hide(),setTimeout((function(){joinchat_obj.$div.removeClass("joinchat--show")}),400)):joinchat_obj.$div.removeClass("joinchat--show"):joinchat_obj.$div.addClass("joinchat--show")}j||h&&s&&!joinchat_obj.settings.message_badge&&_||(p+=" joinchat--tooltip"),setTimeout((function(){joinchat_obj.$div.addClass(p)}),i),h&&!j&&s&&(joinchat_obj.settings.message_badge?a=setTimeout((function(){joinchat_obj.$(".joinchat__badge").addClass("joinchat__badge--in")}),i+s):_&&(a=setTimeout(r,i+s))),c&&!joinchat_obj.is_mobile&&joinchat_obj.$(".joinchat__button").on("mouseenter",(function(){n=setTimeout(r,1500)})).on("mouseleave",(function(){clearTimeout(n)})),joinchat_obj.$(".joinchat__button").on("click",(function(){c&&!joinchat_obj.chatbox?r():Date.now()>joinchat_obj.showed_at+600&&(l(),joinchat_obj.open_whatsapp())})),joinchat_obj.$(".joinchat__close").on("click",l),joinchat_obj.$("#joinchat_optin").on("change",(function(){joinchat_obj.$div.toggleClass("joinchat--optout",!this.checked)})),joinchat_obj.$(".joinchat__box__scroll").on("mousewheel DOMMouseScroll",(function(t){t.preventDefault(),t=t.originalEvent.wheelDelta||-t.originalEvent.detail,this.scrollTop+=30*(t<0?1:-1)})),joinchat_obj.is_mobile&&(t(o).on("focus blur","input, textarea",(function(e){t(e.target).closest(joinchat_obj.$div).length||(clearTimeout(b),b=setTimeout(u,200))})),t(e).on("resize",(function(){clearTimeout(g),g=setTimeout((function(){joinchat_obj.$div[0].style.setProperty("--vh",window.innerHeight+"px")}),200)})).trigger("resize")),t(o).on("click",'.joinchat_open, .joinchat_app, a[href="#joinchat"], a[href="#whatsapp"]',(function(e){e.preventDefault(),c&&t(this).is('.joinchat_open, a[href="#joinchat"]')?r():joinchat_obj.open_whatsapp(t(this).data("phone"),t(this).data("message"))})),t(o).on("click",".joinchat_close",(function(t){t.preventDefault(),joinchat_obj.chatbox_hide()})),c&&"IntersectionObserver"in e&&0<(h=t(".joinchat_show, .joinchat_force_show")).length&&(d=new IntersectionObserver((function(e){t.each(e,(function(){if(0<this.intersectionRatio&&(!j||t(this.target).hasClass("joinchat_force_show")))return r(),d.disconnect(),!1}))})),h.each((function(){d.observe(this)}))),joinchat_obj.settings.qr&&!joinchat_obj.is_mobile&&"function"==typeof kjua?joinchat_obj.$(".joinchat__qr").kjua({text:joinchat_obj.whatsapp_link(void 0,void 0,!1),render:"canvas",rounded:80}):joinchat_obj.$(".joinchat__qr").remove(),c&&joinchat_obj.$div.css("--peak","url(#joinchat__message__peak)"),t(o).trigger("joinchat:start")}():(joinchat_obj.$div.removeClass("joinchat--show"),t(o).on("click",'.joinchat_open, .joinchat_app, a[href="#joinchat"], a[href="#whatsapp"]',(function(e){e.preventDefault(),joinchat_obj.open_whatsapp(t(this).data("phone"),t(this).data("message"))}))),"function"!=typeof kjua||joinchat_obj.is_mobile?t(".wp-block-joinchat-button figure").remove():t(".joinchat-button__qr").each((function(){t(this).kjua({text:joinchat_obj.whatsapp_link(t(this).data("phone"),t(this).data("message"),!1),render:"canvas",rounded:80})}))),joinchat_obj.store.setItem("joinchat_views",parseInt(joinchat_obj.store.getItem("joinchat_views")||0)+1)}},t(n),t(e).on("load",n),o.addEventListener("DOMContentLoaded",n)}(jQuery,window,document);